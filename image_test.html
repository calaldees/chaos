<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <link id="favicon" rel="shortcut icon" type="image/png" href="data:image/png;base64,....==" />
    <title>Chaos: Image Test</title>
    <style>
        html, body {margin: 0; padding: 0; height: 100%; overflow: hidden;}
        canvas {image-rendering: pixelated; object-fit: contain; width:100%; max-width: 100%; height: 100%; max-height: 100%;}
    </style>
</head>
<body>
<canvas id="canvas" width="256" height="192"></canvas>
<script type="module">
    import {loadImage, loadImages} from './image_decode.js'
    import {drawBorder} from './border.js'
    import {shiftImage, COLOR} from './image_draw.js'
    import {sprite_data} from './sprite_data.js'


    const canvas = document.getElementById('canvas')
    const c = canvas.getContext('2d')

    const w = canvas.width
    const h = canvas.height

    c.fillStyle = COLOR.black
    c.fillRect(0, 0, w, h)

    drawBorder(c,COLOR.yellow,0,0,w,h)

    const s_cursor = `
        $FF,$80,$80,$87,$8C,$88,$8C,$87
        $FF,$01,$01,$E1,$31,$11,$01,$E1
        $80,$80,$88,$8C,$87,$80,$80,$FF
        $31,$11,$11,$31,$E1,$01,$01,$FF
    `

    /*
    const wizard1 = `
        $00,$00,$01,$01,$07,$0F,$3B,$1B
        $00,$00,$80,$80,$FE,$9C,$8C,$84
        $13,$13,$03,$03,$07,$1F,$00,$00
        $80,$C0,$C0,$C0,$E0,$E0,$00,$00
    `
    c.drawImage(shiftImage(loadImage(wizard1), "#0FF ") , 16, 16)
    */

    const wizard_sprites = [...loadImages(sprite_data.wizards)]
    for (let i=0 ; i<wizard_sprites.length ; i++) {
        c.drawImage(shiftImage(wizard_sprites[i], Object.values(COLOR)[i%7+1]) , (i+1)*16, 16)
    }


    const monster_sprites = [...loadImages(sprite_data.monsters)]
    for (let i=0 ; i<monster_sprites.length ; i++) {
        c.drawImage(shiftImage(monster_sprites[i], COLOR.white) , (i%16)*16, 32+(Math.floor(i/16)*16))
    }

    const i = loadImage(s_cursor)

    c.drawImage(shiftImage(i, '#EE0'), 64, 48)

    //c.drawImage(loadImage(s_cursor), 48, 48)

    



</script>
</body>
</html>